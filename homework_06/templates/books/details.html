{% extends 'books/base.html' %}

{% block title %}
    Book "{{ title }}" details
{% endblock %}

{% block body %}
<div>
    <h3>Book {{ book.title }}</h3>
    <h5>
        Author: {{ book.author }}<br>
        Created at: {{ book.created_at }}
    </h5>
    <div>
        <button class="btn btn-danger" onclick="deleteBook()">Delete book</button>
        <button class="btn btn-primary" onclick="location.href={{ url_for('books_app.list') }}">Back to list</button>
    </div>
</div>
  <script>
    function deleteBook() {
      console.log('delete book');

      // Delete book
      const xhr = new XMLHttpRequest();
      xhr.open("DELETE", document.URL, true);
      xhr.onload = function () {
        window.location.href = "{{ url_for('books_app.list') }}"
      }
      xhr.send(null);
    }
  </script>
{% endblock %}